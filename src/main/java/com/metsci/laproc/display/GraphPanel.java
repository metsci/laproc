package com.metsci.laproc.display;

import com.jogamp.opengl.util.FPSAnimator;
import com.metsci.glimpse.canvas.NewtSwingGlimpseCanvas;
import com.metsci.laproc.plotting.Axis;
import com.metsci.laproc.plotting.GraphableData;

import javax.swing.*;

/**
 * Created by porterjc on 9/26/2016.
 */
public class GraphPanel extends JPanel{
    private NewtSwingGlimpseCanvas canvas;
    private GraphDisplayer graphDisplayer;

    /**
     * Simple constructor
     * Creaded by porterjc on 9/22/2016
     */
    public GraphPanel(){
        canvas = new NewtSwingGlimpseCanvas();
        new FPSAnimator(canvas.getGLDrawable(), 120).start();
    }

	/**
     * Takes a graph and properly builds a canvas from the layout generated by the graph
     * Creaded by porterjc on 9/22/2016
     */
    public void addGraphToCanvas(GraphDisplayer displayer) {
        canvas.removeAllLayouts();
        canvas.addLayout(displayer.getLayout());
        this.graphDisplayer = displayer;
    }

    /**
     * Returns the canvas
     * Creaded by porterjc on 9/22/2016
     */
    public NewtSwingGlimpseCanvas getCanvas(){
        return canvas;
    }

    /**
     * Sets the selected data set
     * @param data data set to set
     */
    public void setSelectedDataSet(GraphableData data) {
        this.graphDisplayer.setSelectedDataSet(data);
    }

    /**
     * Updates the displayed graph
     */
    public void updateGraph() {
        canvas.removeAllLayouts();
        canvas.addLayout(graphDisplayer.getLayout());
    }

    /**
     * Updates the x and y axis of the displayer
     * @param x new x axis
     * @param y new y axis
     */
    public void updateGraphAxis(Axis x, Axis y){
        graphDisplayer.setXAxis(x);
        graphDisplayer.setYAxis(y);
    }
}
